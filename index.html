<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DicionÃ¡rio Tupi-PortuguÃªs</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; background-color: #f4f4f4; }
        h1 { color: #333; }
        input { padding: 10px; width: 250px; margin-top: 10px; }
        button { padding: 10px; cursor: pointer; background-color: #007bff; color: white; border: none; }
        button:hover { background-color: #0056b3; }
        p { font-size: 18px; font-weight: bold; margin-top: 10px; color: #333; }
        #history { margin-top: 20px; text-align: left; max-width: 400px; margin-left: auto; margin-right: auto; }
        .history-item { background: white; padding: 8px; margin: 5px 0; border-radius: 5px; box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body>
    <h1>DicionÃ¡rio Tupi-PortuguÃªs</h1>
    <input type="text" id="search" placeholder="Digite uma palavra em portuguÃªs...">
    <button onclick="searchWord()">Pesquisar</button>
    <p id="result"></p>

    <h2>HistÃ³rico de Pesquisas</h2>
    <div id="history"></div>

    <script>
        let dictionary = [];

        // Carrega o JSON corretamente
        fetch("dictionary.json")
            .then(response => {
                if (!response.ok) {
                    throw new Error("Erro ao carregar o JSON");
                }
                return response.json();
            })
            .then(data => {
                dictionary = data.Planilha1; // Acessa a lista de palavras dentro de "Planilha1"
                console.log("DicionÃ¡rio carregado com sucesso!", dictionary);
            })
            .catch(error => {
                console.error("Erro ao carregar o dicionÃ¡rio:", error);
                document.getElementById("result").innerText = "Erro ao carregar dicionÃ¡rio!";
            });

        function searchWord() {
            let word = document.getElementById("search").value.trim().toLowerCase();
            let translation = "TraduÃ§Ã£o nÃ£o encontrada";

            if (dictionary.length > 0) {
                let found = dictionary.find(entry => entry.Portugues.toLowerCase() === word);
                if (found) {
                    translation = found["Tupi Antigo"];
                }
            }

            document.getElementById("result").innerText = "TraduÃ§Ã£o: " + translation;

            // Adicionar ao histÃ³rico
            if (word) {
                addToHistory(word, translation);
            }
        }

        function addToHistory(word, translation) {
            let history = JSON.parse(localStorage.getItem("searchHistory")) || [];
            history.unshift({ word, translation }); // Adiciona a nova busca no topo

            // Limita o histÃ³rico a 10 buscas mais recentes
            if (history.length > 10) {
                history.pop();
            }

            localStorage.setItem("searchHistory", JSON.stringify(history));
            renderHistory();
        }

        function renderHistory() {
            let history = JSON.parse(localStorage.getItem("searchHistory")) || [];
            let historyDiv = document.getElementById("history");
            historyDiv.innerHTML = ""; // Limpa antes de re-renderizar

            history.forEach(item => {
                let entry = document.createElement("div");
                entry.className = "history-item";
                entry.innerText = `ðŸ”Ž ${item.word} â†’ ${item.translation}`;
                historyDiv.appendChild(entry);
            });
        }

        // Carrega o histÃ³rico ao abrir a pÃ¡gina
        renderHistory();
    </script>
</body>
</html>
